<Page x:Class="SDBS3000.Views.PagePos"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:SDBS3000.Views"
      xmlns:uc1="clr-namespace:SDBS3000.Ucs.Controls;assembly=SDBS3000.Ucs"
      xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
      xmlns:loc="clr-namespace:SDBS3000.Resources"
      DataContext="{Binding Source={StaticResource Locator},Path=Pos}"
      mc:Ignorable="d"
      d:DesignHeight="880" d:DesignWidth="1920"
      Title="PagePos">
    <Page.InputBindings>
        <KeyBinding Modifiers="Ctrl" Key="C" Command="{Binding Pulse}"/>
        <KeyBinding Modifiers="Ctrl" Key="S" Command="{Binding SetSave}"/>
    </Page.InputBindings>
    <Border x:Name="main" Width="1730" Height="680" CornerRadius="20" Focusable="True">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="Unloaded">
                <i:InvokeCommandAction Command="{Binding Unloaded}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>
        <Border.Background>
            <ImageBrush ImageSource="{DynamicResource mainbk}"/>
        </Border.Background>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="195"/>
            </Grid.ColumnDefinitions>
            <StackPanel Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Bottom">
                <StackPanel.Resources>
                    <Style TargetType="Button">
                        <Setter Property="Height" Value="171.1"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Border x:Name="border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                                        <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" ContentStringFormat="{TemplateBinding ContentStringFormat}" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="Button.IsDefaulted" Value="True">
                                            <Setter Property="BorderBrush" TargetName="border" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" TargetName="border" Value="{StaticResource ResourceKey=userwxz}"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter Property="Background" TargetName="border" Value="{StaticResource ResourceKey=userwxz}"/>
                                        </Trigger>
                                        <Trigger Property="ToggleButton.IsChecked" Value="True">
                                            <Setter Property="Background" TargetName="border" Value="#FFBCDDEE"/>
                                            <Setter Property="BorderBrush" TargetName="border" Value="#FF245A83"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                    <Style TargetType="Label">
                        <Setter Property="Margin" Value="0,20,0,0"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="FontSize" Value="24"/>
                        <Setter Property="Foreground" Value="#FFFFFF"/>
                    </Style>
                    <Style x:Key="autowrap" TargetType="TextBlock">
                        <Setter Property="Margin" Value="0,18,0,0"/>
                        <Setter Property="VerticalAlignment" Value="Center"/>
                        <Setter Property="HorizontalAlignment" Value="Center"/>
                        <Setter Property="FontSize" Value="24"/>
                        <Setter Property="Foreground" Value="{DynamicResource txtColor1}"/>
                        <Setter Property="TextWrapping" Value="Wrap"/>
                        <Setter Property="MinHeight" Value="60"/>
                        <Setter Property="TextAlignment" Value="Center"/>
                    </Style>
                    <Style TargetType="Image">
                        <Setter Property="Height" Value="63"/>
                        <Setter Property="Stretch" Value="Uniform"/>
                        <Setter Property="Margin" Value="0,18,0,0"/>
                    </Style>
                </StackPanel.Resources>
                <Button Style="{DynamicResource btnStyle}" Command="{Binding Heat}" Margin="0,0,0,0">
                    <Button.Content>
                        <StackPanel Width="{Binding ElementName=b1,Path=ActualWidth}" Height="{Binding ElementName=b1,Path=ActualHeight}">
                            <Image Source="/Utils/Icon/start.png" />
                            <TextBlock  Style="{StaticResource autowrap}" Text="{Binding [heat], Source={x:Static loc:LanguageManager.Instance}}" MaxWidth="180"/>
                        </StackPanel>
                    </Button.Content>
                </Button>
                <Button  Style="{DynamicResource btnStyle}" Command="{Binding SFCalStart}" CommandParameter="{Binding ElementName=ct}">
                    <Button.Content>
                        <StackPanel Width="{Binding ElementName=b1,Path=ActualWidth}" Height="{Binding ElementName=b1,Path=ActualHeight}">
                            <Image Source="/Utils/Icon/start.png" />
                            <TextBlock x:Name="ct" Style="{StaticResource autowrap}" Text="{Binding [pluperrev], Source={x:Static loc:LanguageManager.Instance}}" MaxWidth="180"/>
                        </StackPanel>
                    </Button.Content>
                </Button>
                <Button Style="{DynamicResource btnStyle}" Command="{Binding SetSave}" >
                    <Button.Content>
                        <StackPanel Width="{Binding ElementName=b1,Path=ActualWidth}" Height="{Binding ElementName=b1,Path=ActualHeight}">
                            <Image Source="/SDBS3000;component/Utils/Icon/Save.png" />
                            <TextBlock Style="{StaticResource autowrap}" Text="{Binding [save], Source={x:Static loc:LanguageManager.Instance}}"/>
                        </StackPanel>
                    </Button.Content>
                </Button>
            </StackPanel>
            
            <UniformGrid Columns="4" Rows="4" Height="700">
                <!--转向 正转 反转-->
                <ComboBox HorizontalAlignment="Center" Tag="{Binding [chadir], Source={x:Static loc:LanguageManager.Instance}}" Style="{StaticResource ComboBoxStyle2}" SelectedIndex="{Binding Line[1]}" ItemContainerStyle="{DynamicResource ComboBoxItemStyle2}" Height="126" Width="220" Margin="37,42,0,0">
                    <ComboBoxItem Content="{Binding [corotation], Source={x:Static loc:LanguageManager.Instance}}"/>
                    <ComboBoxItem Content="{Binding [reversal], Source={x:Static loc:LanguageManager.Instance}}"/>
                </ComboBox>
                <!--开关类型 光电开关 数槽开关-->
                <ComboBox HorizontalAlignment="Center" Tag="{Binding [switype], Source={x:Static loc:LanguageManager.Instance}}" MaxDropDownHeight="Auto" Style="{StaticResource ComboBoxStyle2}" SelectedIndex="{Binding Line[2],Mode=TwoWay}" ItemContainerStyle="{DynamicResource ComboBoxItemStyle2}" Height="126" Width="220" Margin="37,42,0,0">
                    <ComboBoxItem Content="{Binding [phoswi], Source={x:Static loc:LanguageManager.Instance}}"/>
                    <ComboBoxItem Content="{Binding [proswi], Source={x:Static loc:LanguageManager.Instance}}"/>
                </ComboBox>

                <!--脉冲数 槽数    定位转速 加速时间 减速时间 定位角度补偿 转差补偿-->
                <uc1:SetItem Height="126" Width="220" LabelText="{Binding [pulseper], Source={x:Static loc:LanguageManager.Instance}}" Text="{Binding Line[3],Mode=TwoWay}" Margin="40,40,0,0" Limit="1"/>
                <uc1:SetItem Height="126" Width="220" LabelText="{Binding [numofrotor], Source={x:Static loc:LanguageManager.Instance}}" Text="{Binding Line[4],Mode=TwoWay}" Margin="40,40,0,0" Limit="1"/>

                <uc1:SetItem Height="126" Width="220" LabelText="{Binding [posspeed], Source={x:Static loc:LanguageManager.Instance}}" Text="{Binding Line[5],Mode=TwoWay}" Margin="40,40,0,0" Limit="1"/>
                <uc1:SetItem Height="126" Width="220" LabelText="{Binding [acctime], Source={x:Static loc:LanguageManager.Instance}}" Text="{Binding Line[6],Mode=TwoWay}" Margin="40,40,0,0" Limit="3"/>
                <uc1:SetItem Height="126" Width="220" LabelText="{Binding [dectime], Source={x:Static loc:LanguageManager.Instance}}" Text="{Binding Line[7],Mode=TwoWay}" Margin="40,40,0,0" Limit="3"/>
                <uc1:SetItem Height="126" Width="220" LabelText="{Binding [poscom], Source={x:Static loc:LanguageManager.Instance}}" Text="{Binding Line[8],Mode=TwoWay}" Margin="40,40,0,0" Limit="3" IsEnabled="True"/>
                <uc1:SetItem Height="126" Width="220" LabelText="{Binding [revdifcom], Source={x:Static loc:LanguageManager.Instance}}" Text="{Binding Line[9],Mode=TwoWay}" Margin="40,40,0,0" Limit="3" IsEnabled="True"/>
                <uc1:SetItem Height="126" Width="220" LabelText="{Binding [timefcom], Source={x:Static loc:LanguageManager.Instance}}" Text="{Binding Line[10],Mode=TwoWay}" Margin="40,40,0,0" Limit="3" IsEnabled="True"/>
                <uc1:SetItem Height="126" Width="220" LabelText="{Binding [Restime], Source={x:Static loc:LanguageManager.Instance}}" Text="{Binding RemainingSeconds,Mode=TwoWay}" Margin="40,40,0,0" Limit="3" IsEnabled="False"/>
                <uc1:SetItem Height="126" Width="220" LabelText="转速系数" Text="{Binding  Line[11],Mode=TwoWay,FallbackValue=1}" Margin="40,40,0,0" Limit="3" />
                <!--<uc1:SetItem Height="126" Width="220" LabelText="模拟定位角度" Text="{Binding Angel,Mode=TwoWay}"  Margin="40,40,0,0" Limit="3"/>-->
            </UniformGrid>
            <!--<Button Command="{Binding Add}" Content="微动+" Background="{StaticResource confirm}" Style="{StaticResource btnselect}" Margin="1306,406,79,228"/>
            <Button Command="{Binding Dec}" Content="微动-" Background="{StaticResource confirm}" Style="{StaticResource btnselect}" Margin="1306,511,79,123"/>
            <Button Command="{Binding Clear}" Content="微动清空" Background="{StaticResource confirm}" Style="{StaticResource btnselect}" Margin="1306,610,79,24"/>
            <Button Command="{Binding Pos}" Content="左定位" Background="{StaticResource confirm}" Style="{StaticResource btnselect}" Margin="949,406,436,228"/>-->

        </Grid>
    </Border>
</Page>
