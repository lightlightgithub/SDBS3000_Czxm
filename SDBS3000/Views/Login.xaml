<Window
    x:Class="SDBS3000.Views.Login"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:SDBS3000="clr-namespace:SDBS3000"
    xmlns:cvt="clr-namespace:SDBS3000.Utils.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:loc="clr-namespace:SDBS3000.Resources"
    xmlns:local="clr-namespace:SDBS3000.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:uc1="clr-namespace:SDBS3000.Ucs;assembly=SDBS3000.Ucs"
    Title="Super Dynamic Balance System 3000"
    AllowsTransparency="False"
    Background="Transparent"
    DataContext="{Binding Source={StaticResource Locator}, Path=WinLogin}"
    ResizeMode="CanResize"
    Unloaded="Window_Unloaded"
    WindowState="Maximized"
    WindowStyle="None"
    mc:Ignorable="d">
    <!--  以下三个标记语言是绑定快捷键的语法  -->
    <Window.InputBindings>
        <KeyBinding
            Key="Enter"
            Command="{Binding LoginBtn}"
            CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}" />
        <KeyBinding
            Key="Enter"
            Command="{Binding LoginBtn}"
            CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}"
            Modifiers="Ctrl" />
    </Window.InputBindings>

    <Viewbox>
        <Grid
            Width="1920"
            Height="1080"
            Background="{StaticResource loginbg}">
            <Grid.RowDefinitions>
                <RowDefinition Height="324*" />
                <!--  标题 SizeChanged="Grid_SizeChanged"  -->
                <RowDefinition Height="70*" />
                <RowDefinition Height="66*" />
                <!--  用户名  -->
                <RowDefinition Height="70*" />
                <RowDefinition Height="40*" />
                <!--  密码  -->
                <RowDefinition Height="70*" />
                <RowDefinition Height="147*" />
                <!--  登录 7  -->
                <RowDefinition Height="73*" />
                <RowDefinition Height="145*" />
                <RowDefinition Height="35*" />
                <RowDefinition Height="40*" />
            </Grid.RowDefinitions>
            <Grid
                Width="72"
                Height="72"
                HorizontalAlignment="Right"
                VerticalAlignment="Top">
                <Button
                    Width="40"
                    Height="40"
                    Background="Transparent"
                    BorderThickness="0"
                    Command="{Binding CloseBtn}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}">
                    <Image Source="{DynamicResource LoginClose}" Stretch="Uniform"/>
                </Button>
            </Grid>

            <uc1:FontSpace
                Grid.Row="1"
                Ctx="Super Dynamic Balance System 3000"
                Fts="40"
                Thickness="2" />
            <ComboBox
                x:Name="user"
                Grid.Row="3"
                Width="474"
                Height="69"
                BorderThickness="0"
                FontSize="24"
                IsEditable="True"
                ItemContainerStyle="{DynamicResource ComboBoxItemStyle2}"
                ItemsSource="{Binding Userlist}"
                SelectedIndex="{Binding Index}"
                Style="{DynamicResource ComboBoxStyle1}"
                Text="{Binding Name}">
                <ComboBox.Resources>
                    <Style BasedOn="{StaticResource ScrollStyle_Mobile}" TargetType="ScrollBar" />
                    <!--  纵向滚动条宽度  -->
                    <sys:Double x:Key="VerticalScrollBarThickness">15</sys:Double>
                    <!--  纵向滑块圆角  -->
                    <CornerRadius x:Key="VerticalThumbCornerRadius">8</CornerRadius>
                </ComboBox.Resources>
            </ComboBox>
            <uc1:PasswordTextBox
                x:Name="psd"
                Grid.Row="5"
                Width="474"
                Height="70"
                CaretBrush="{DynamicResource txtColor1}"
                FontSize="24"
                InputMethod.IsInputMethodEnabled="False"
                Password="{Binding Psd, Mode=TwoWay}"
                Style="{DynamicResource PasswordTextBox}">
                <uc1:PasswordTextBox.CommandBindings>
                    <CommandBinding CanExecute="CommandCanExecute" Command="ApplicationCommands.Paste" />
                    <CommandBinding CanExecute="CommandCanExecute" Command="ApplicationCommands.Cut" />
                    <CommandBinding CanExecute="CommandCanExecute" Command="ApplicationCommands.Copy" />
                </uc1:PasswordTextBox.CommandBindings>
            </uc1:PasswordTextBox>
            <Button
                x:Name="btndl"
                Grid.Row="7"
                Width="474"
                Height="72"
                BorderThickness="0"
                Command="{Binding LoginBtn}"
                CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}"
                Content="{Binding [Login], Source={x:Static loc:LanguageManager.Instance}}"
                FontSize="24"
                Foreground="{DynamicResource txtColor1}"
                Style="{DynamicResource ButtonStyle1}" />

            <!--  添加授权状态显示  -->
            <Button
                Grid.Row="9"
                Height="30"
                Margin="0,0,20,5"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Background="Transparent"
                BorderThickness="0"
                Command="{Binding ShowAuthorizationDetailsCommand}"
                Content="{Binding AuthorizationStatus}"
                FontSize="12"
                Foreground="White"
                ToolTip="点击查看授权详情">
                <Button.Style>
                    <Style BasedOn="{StaticResource {x:Type Button}}" TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <TextBlock
                                        Padding="{TemplateBinding Padding}"
                                        Text="{TemplateBinding Content}"
                                        TextDecorations="Underline" />
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="LightGray" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <uc1:FontSpace
                Grid.Row="9"
                Ctx="© Shanghai Jianping Dynamic Balancing Machine Manufacturing Co.,L"
                Fts="20"
                Thickness="0.5" />
        </Grid>
    </Viewbox>
</Window>